# 第四章 串行线调试端口 SW-DP
这一章主要描述SW-DP，当然也包含SWD接口（#或者应当称为SWD协议）。如果ARM 调试接口是以SW-DP方式实现的，SWD接口是唯一的接口。在这种条件下，SW-DP提供一个外部连接用于连接到调试接口，在这个章节内，所有接口的访问都是使用SWD协议。

这章包含以下几个部分：
> * 串行调试端口（SW-DP）的介绍
> * ARM串行调试协议（SWD）的介绍
> * SWD协议的使用
> * 介绍SWD接口

## 4.1 串行调试端口（SW-DP）的介绍

本章节从架构的角度来描述SW-DP，着重提到，通过物理连线到ARM调试接口（ADI）的串行调试接口(SWI)。本章描述了：
> * 串行调试协议（SWD）
> * 怎么样通过协议访问DP寄存器
> * How the SW-DP provides Accesses

ARM串行调试接口是一个同步串行接口，本章不描述SWD接口的物理特性，例如时序等。

******** 注意 *********

如果需要关于ARM串行调试接口的详细，请联系ARM

## 4.2  ARM串行调试协议（SWD）的介绍

ARM串行调试接口使用一个双向的数据线和一个用于同步传输数据的独立时钟线。
一个操作包含两个阶段。

__请求包__
> 外部调试器产生一个请求，到DP，DP是请求的目标。

__应答请求__
> 目标对主机的请求产生应答

__数据传输__
> 该阶段在以下其中一个条件下出现：
>> * 应答后的一个数据读或写请求
>> * CTRL/STAT.ORUNDETECT 标识被设置为1

> 数据传输如下一种:
>> * 目标到主机，跟随一个读请求（RDATA）
>> * 主机到目标，跟随一个写请求（WDTAT）

>> 注意 :
>> 如果CTRL/STAT.ORUNDETECT被设置为1，那么一个数据传输阶段就应当出现在应答中，包含WAIT和FAULT。

当SW-DP收到一个来自调试主机的请求包，它必须通过应答短语立即回应。
